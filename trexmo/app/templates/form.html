<form id="{{fd.name}}" class="">
  {% for field in fd.fields.values() %}
  <div
    class="col-sm-6 form-group
    {% if is_translated %}
    {% if not (values[field.name].selection or values[field.name].exp_selection) %}
    has-error
    {% elif (values[field.name].selection|length + values[field.name].exp_selection|length) > 1 %}
    has-warning
    {% else %}
    {{values[field.name].selection}} {{values[field.name].exp_selection}}
    has-success
    {% endif %}
    {% endif %}"
    {% if field.preconditions %}style="display:none"{% endif %}
  >
    <label for="{{fd.name}}_{{field.name}}" class="control-label">
      {{field.label}}{% if field.required %}*{% endif %}
    </label>
    <div>
      {% if field.options %}
      <select id="{{fd.name}}_{{field.name}}" name="{{field.name}}"
        class="form-control{% if field.allows_custom %} allows-custom{% endif %}"
        data-type="{{field.data_type.__name__}}">
        {% for option in field.options %}
        <option
          {% if option.value == values[field.name] %}selected="selected"{% endif %}
          value="{{option.value}}">
          {% if option.value in values[field.name].selection %}
          (recommended)
          {% elif option.value in values[field.name].exp_selection %}
          (experimental)
          {% endif %}
          {{option.label}}
        </option>
        {% endfor %}
      </select>
      {% if field.allows_custom %}
      <div class="text-center"><em>or</em></div>
      <input name="{{field.name}}_alt"
        class="form-control" data-type="{{field.data_type.__name__}}"
        placeholder="type a {{field.data_type.__name__}} value here"
        value="{{values.get(field.name)}}">
      {% endif %}
      {% else %}
      <input id="{{fd.name}}_{{field.name}}" name="{{field.name}}"
        class="form-control" data-type="{{field.data_type.__name__}}"
        placeholder="type a {{field.data_type.__name__}} value here"
        value="{{values.get(field.name)}}">
      {% endif %}
    </div>
  </div>  
  {% endfor %}
</form>